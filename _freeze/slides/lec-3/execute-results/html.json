{
  "hash": "d47038a45d6376e492db289ef8ed8204",
  "result": {
    "markdown": "---\ntitle: \"Data Summary and Visualization\"\nsubtitle: \"STA 101L - Summer I 2022\"\nauthor: \"Raphael Morsomme\"\nfooter:  \"[https://rmorsomme.github.io/website/](https://rmorsomme.github.io/website/)\"\nlogo: \"images/logo.jpg\"\nformat: \n  revealjs: \n    theme: slides.scss\n    multiplex: true\n    transition: fade\n    slide-number: true\n    code-fold: false\n    code-summary: \"Show the code\"\n    code-link: true\n    code-copy: true\n    self-contained: true\n    scrollable: true\neditor: visual\nexecute:\n  freeze: auto\n  echo: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n# Welcome\n\n## Announcements - OH\n\n-   [OH](https://rmorsomme.github.io/website/course-team.html):\n    -   Raphael: Mon, Wed 10-11am (virtual)\n    -   Roy: Wed, Fri 4:45-5:45pm (hybrid)\n-   This week (exceptional):\n    -   Roy: Fri 2:30-3:30pm (hybrid)\n    -   Raphael: Sun 9:00-10:00am (virtual)\n\n## Announcements - HW\n\n-   HW due on **Sunday 9:00pm** and **Wednesday 9:00pm**\n-   HW 1 is due **Sunday, May 15 at 9:00pm**\n\n## Announcements - general\n\n-   Lectures will closely follow IMS, but\n    -   some topics will be skipped, e.g. 2.1.5, dot plots, etc.\n    -   some topics will be added, e.g. AIC and BIC\n-   Drop/Add for Term 1 ends tomorrow (Friday, May 13).\n\n## Franklin (albino) and Gillman have read the syllabus. Have you?\n\n[![](images/lec-3/frank_gil.jpeg){fig-alt=\"Picture of two of my guinea pigs, Franklin (albino) and Gilman\" width=\"800\"}](https://rmorsomme.github.io/website/course-syllabus.html)\n\n## Recap of last lecture\n\n::: incremental\n-   observations (row) and variables (column)\n-   population parameters and sample statistics\n-   statistical inference\n-   sampling\n-   four types of variables\n-   experiments, observational studies and causal claims\n:::\n\n------------------------------------------------------------------------\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Breakdown of variables into their respective types.](lec-3_files/figure-revealjs/variables-1.png){fig-align='center' fig-alt='Types of variables are broken down into numerical (which can be discrete or continuous) and categorical (which can be ordinal or nominal).' width=80%}\n:::\n:::\n\nSource: [IMS](https://www.openintro.org/book/ims/)\n\n## Outline\n\n-   Visualization for numerical data\n-   Summary for numerical data\n-   Visualization for categorical data\n-   Summary for categorical data\n-   More visualizations\n\n> \"The greatest value of a picture is when it forces us to notice what we never expected to see.\" --- John Tukey\n\n## 7 Billion: Are You Typical?\n\n[National Geographic](https://youtu.be/4B2xOvKFFz4)\n\n. . .\n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - data summaries?\n\n1.  What variables are mentioned in the video?\n2.  What are their types?\n3.  How were they summarized and/or visualized?\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_6286516e\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">02</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n# Visualization for numerical data\n\n## US birth data\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(fivethirtyeight) # for the USbirth dataset\nd_birth <- fivethirtyeight::US_births_2000_2014\n```\n:::\n\nThere are 5479 observations (rows)\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnrow(d_birth) # number of rows\n```\n\n::: {.cell-output-stdout}\n```\n[1] 5479\n```\n:::\n:::\n\nand 6 variables (columns)\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nncol(d_birth) # number of columns\n```\n\n::: {.cell-output-stdout}\n```\n[1] 6\n```\n:::\n:::\n\n## \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(d_birth)\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 6 x 6\n   year month date_of_month date       day_of_week births\n  <int> <int>         <int> <date>     <ord>        <int>\n1  2000     1             1 2000-01-01 Sat           9083\n2  2000     1             2 2000-01-02 Sun           8006\n3  2000     1             3 2000-01-03 Mon          11363\n4  2000     1             4 2000-01-04 Tues         13032\n5  2000     1             5 2000-01-05 Wed          12558\n6  2000     1             6 2000-01-06 Thurs        12466\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyverse)       # for data wrangling\nglimpse(d_birth)\n```\n\n::: {.cell-output-stdout}\n```\nRows: 5,479\nColumns: 6\n$ year          <int> 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 20~\n$ month         <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,~\n$ date_of_month <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1~\n$ date          <date> 2000-01-01, 2000-01-02, 2000-01-03, 2000-01-04, 2000-01~\n$ day_of_week   <ord> Sat, Sun, Mon, Tues, Wed, Thurs, Fri, Sat, Sun, Mon, Tue~\n$ births        <int> 9083, 8006, 11363, 13032, 12558, 12466, 12516, 8934, 794~\n```\n:::\n:::\n\n## Histogram\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"1|2\"}\nggplot(d_birth) +\n  geom_histogram(aes(births)) +\n  labs(title = \"Daily number of natural births in the US between 2000 and 2014\")\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## \n\n-   Higher bars indicate where the data are relatively more common\n-   More days with around 8,000 births or with around 12,500 births\n-   Few days with less than 7,000 or more than 14,000 births.\n-   Also few days with around 10,000 births\n\nWe can change the number of bins to have a rougher or more detailed histogram.\n\n## \n\n::: panel-tabset\n## bins = 10\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_birth) +\n  geom_histogram(aes(births), bins = 10)\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## bins = 100\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_birth) +\n  geom_histogram(aes(births), bins = 100)\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=80%}\n:::\n:::\n:::\n\n## Statistics as an art - describing a distribution {.smaller}\n\n::: callout-tip\nTo explore a numerical variable, always start with a histogram\n:::\n\nTo describe the distribution of a numerical variable, we comment on\n\n-   the mode(s): unimodal, bimodal, multimodal\n-   the shape of each mode: flat, bell-shape, bounded\n-   the symmetry: symmetric, left skewed, right skewed\n-   the outliers: presence of extreme values\n-   any other surprising feature.\n\n::: callout-note\n## Describing a distribution is an art\n\nNote that some distributions will not fit nicely in these categories.\n:::\n\n## Describing the US birth data\n\nThe distribution of the daily number of births in the US is **bimodal** with each mode being **bell-shaped** and **symmetric**. We observe **no extreme value**.\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## \n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - describing a distribution\n\nDescribe the distributions in exercises 5.6, 5.13, 5.24 and 5.26 (only consider the histograms)\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_628652d0\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">04</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n## Scatterplots\n\n**Histograms**: visualize the distribution of a **single** numerical variable.\n\n. . .\n\n**Scatterplots**: visualize the relation between **two** numerical variables.\n\n## The `mpg` dataset\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_car <- ggplot2::mpg\nhead(d_car)\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 6 x 11\n  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class \n  <chr>        <chr> <dbl> <int> <int> <chr>      <chr> <int> <int> <chr> <chr> \n1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa~\n2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa~\n3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa~\n4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa~\n5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa~\n6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa~\n```\n:::\n:::\n\nWe will look at the relation between engine size (`disp`) and fuel efficiency (`hwy`).\n\n## \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"1|2\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(title = \"Relation between fuel consumption on the highway and engine size\")\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## \n\n::: callout-note\nTo add an additional variable to your visualization, you can use color or symbols.\n:::\n\n## \n\n::: panel-tabset\n## Colored points\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy, col = drv))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Symbols\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy, shape = drv))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=80%}\n:::\n:::\n:::\n\n# Summary for numerical data\n\n## Measures of centrality {.smaller}\n\n-   The **average**: $\\bar{x} = \\dfrac{x_1 + \\dots + x_n}{n}$\n    -   To compute the average age in the class, we would calculate\n\n$$\n\\overline{\\text{age}} = \\dfrac{\\text{age}_{Hayden} + \\text{age}_{Janice} + \\text{age}_{Kenndy} + \\text{age}_{Maggie} + \\text{age}_{Melissa} + \\text{age}_{Yuanzhi}}{6}\n$$\n\n-   The **median**: the middle value\n    -   50% of the sample is large than the median, and 50% is smaller.\n\n. . .\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmean(d_birth$births)   # average\n```\n\n::: {.cell-output-stdout}\n```\n[1] 11350.07\n```\n:::\n\n```{.r .cell-code}\nmedian(d_birth$births) # median\n```\n\n::: {.cell-output-stdout}\n```\n[1] 12343\n```\n:::\n:::\n\n## Percentiles\n\nPercentiles are a generalization of the median.\n\n. . .\n\nThe value that is larger than p% of the data and smaller than the rest is called the **p-th percentile**.\n\n. . .\n\nThe median is the *50th* percentile.\n\n. . .\n\nWe will soon make use of the **25th** and **75th percentiles**.\n\nLater in the course, the 95th and 97.5th percentiles will also be useful.\n\n## Measures of variation\n\n-   **Variance**: average *squared* distance from the mean\n    -   **Standard deviation** (sd): square root of the variance (roughly speaking, the average distance to the mean)\n    -   Most (+- 95%) of the data is within 2 sd of the mean.\n-   **Inter-quartile range** (IQR): distance between the 25th and the 75th percentiles.\n\n. . .\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvar(d_birth$births) # variance\n```\n\n::: {.cell-output-stdout}\n```\n[1] 5409444\n```\n:::\n\n```{.r .cell-code}\nsd(d_birth$births) # sd\n```\n\n::: {.cell-output-stdout}\n```\n[1] 2325.821\n```\n:::\n\n```{.r .cell-code}\nIQR(d_birth$births) # iqr\n```\n\n::: {.cell-output-stdout}\n```\n[1] 4342\n```\n:::\n:::\n\n## Robustness\n\nReal-world data often contain **extreme** values\n\n-   measurement errors,\n-   typos,\n-   extreme observations,\n-   ...\n\nThe average, median, variance, sd and iqr are not equally **robust** to the presence of extreme values.\n\n## \n\nLet us contaminate the birth data with an extreme value of 1 billion...\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"1|2\"}\nx_uncontaminated <- d_birth$births  \nx_contaminated   <- c(x_uncontaminated, 1e9) # 1e9 = 10^9 (scientific notation)\n```\n:::\n\n. . .\n\n...and compare the mean, median, variance, sd and iqr of these two variables.\n\n## \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsummary(x_uncontaminated)\n```\n\n::: {.cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   5728    8740   12343   11350   13082   16081 \n```\n:::\n\n```{.r .cell-code}\nsummary(x_contaminated)\n```\n\n::: {.cell-output-stdout}\n```\n     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. \n5.728e+03 8.740e+03 1.234e+04 1.938e+05 1.308e+04 1.000e+09 \n```\n:::\n:::\n\n. . .\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvar(x_uncontaminated); var(x_contaminated)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 5409444\n```\n:::\n\n::: {.cell-output-stdout}\n```\n[1] 1.824776e+14\n```\n:::\n\n```{.r .cell-code}\nsd(x_uncontaminated); sd(x_contaminated)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 2325.821\n```\n:::\n\n::: {.cell-output-stdout}\n```\n[1] 13508428\n```\n:::\n\n```{.r .cell-code}\nIQR(x_uncontaminated); IQR(x_contaminated)\n```\n\n::: {.cell-output-stdout}\n```\n[1] 4342\n```\n:::\n\n::: {.cell-output-stdout}\n```\n[1] 4342.25\n```\n:::\n:::\n\n## \n\n::: callout-warning\n## Robustness of the median and the iqr\n\nWhile the **median and iqr are robust** to the presence of extreme values, the mean, variance and sd are not.\n:::\n\n## \n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - summary statistics\n\nExercises [5.8](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises), [5.11](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises), [5.15](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises) (replace part $c$ by *height of all adults*)\n\nBonus: [5.17](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises), [5.19](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises)\n\nNote: Q1 is first the 25th percentile (larger than one *quarter* of the data), Q3 is the 75th percentile.\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_628652a9\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">05</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n# Summary for categorical data\n\n## Frequency table (1d)\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(d_car)\n```\n\n::: {.cell-output-stdout}\n```\n# A tibble: 6 x 11\n  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class \n  <chr>        <chr> <dbl> <int> <int> <chr>      <chr> <int> <int> <chr> <chr> \n1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa~\n2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa~\n3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa~\n4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa~\n5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa~\n6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa~\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntable(d_car$drv)\n```\n\n::: {.cell-output-stdout}\n```\n\n  4   f   r \n103 106  25 \n```\n:::\n:::\n\n## Contigency table (2d)\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntable(d_car$class, d_car$drv)\n```\n\n::: {.cell-output-stdout}\n```\n            \n              4  f  r\n  2seater     0  0  5\n  compact    12 35  0\n  midsize     3 38  0\n  minivan     0 11  0\n  pickup     33  0  0\n  subcompact  4 22  9\n  suv        51  0 11\n```\n:::\n:::\n\n## Proportion table (2d)\n\n::: panel-tabset\n## table proportion\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2|3\"}\ntable(d_car$class, d_car$drv) %>%\n  prop.table() %>%\n  round(2)\n```\n\n::: {.cell-output-stdout}\n```\n            \n                4    f    r\n  2seater    0.00 0.00 0.02\n  compact    0.05 0.15 0.00\n  midsize    0.01 0.16 0.00\n  minivan    0.00 0.05 0.00\n  pickup     0.14 0.00 0.00\n  subcompact 0.02 0.09 0.04\n  suv        0.22 0.00 0.05\n```\n:::\n:::\n\n## row proportion\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ntable(d_car$class, d_car$drv) %>%\n  prop.table(1) %>%\n  round(2)\n```\n\n::: {.cell-output-stdout}\n```\n            \n                4    f    r\n  2seater    0.00 0.00 1.00\n  compact    0.26 0.74 0.00\n  midsize    0.07 0.93 0.00\n  minivan    0.00 1.00 0.00\n  pickup     1.00 0.00 0.00\n  subcompact 0.11 0.63 0.26\n  suv        0.82 0.00 0.18\n```\n:::\n:::\n\n## column proportion\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ntable(d_car$class, d_car$drv) %>%\n  prop.table(2) %>%\n  round(2)\n```\n\n::: {.cell-output-stdout}\n```\n            \n                4    f    r\n  2seater    0.00 0.00 0.20\n  compact    0.12 0.33 0.00\n  midsize    0.03 0.36 0.00\n  minivan    0.00 0.10 0.00\n  pickup     0.32 0.00 0.00\n  subcompact 0.04 0.21 0.36\n  suv        0.50 0.00 0.44\n```\n:::\n:::\n:::\n\n## \n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - contigency and proportion table\n\n1.  What does the number $12$ (2nd row, 1st column) represent in the contigency table?\n2.  What does the number $0.05$ (2nd row, 1st column) represent in the first proportion table?\n3.  What does the number $0.25$ (2nd row, 1st column) represent in the row proportion table?\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_6286531c\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">03</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n# Visualization for categorical data\n\n## Barplot\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_bar(aes(drv))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-28-1.png){fig-align='center' width=80%}\n:::\n:::\n\n. . .\n\nWe can add a second categorical variable using colors.\n\n## Advanced barplots\n\n::: panel-tabset\n## stacked\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_bar(aes(drv, fill = class))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-29-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## dodged\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_bar(aes(drv, fill = class), position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-30-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## standardized\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_bar(aes(drv, fill = class), position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-31-1.png){fig-align='center' width=80%}\n:::\n:::\n:::\n\n## \n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - pros and cons of barplots\n\nExercise [4.5](https://openintro-ims.netlify.app/explore-numerical.html#chp4-exercises)\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_62865483\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">03</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n# Advanced visualizations\n\n## Faceted histograms\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"1|2,3|4\"}\nd_birth_small <- filter(d_birth, year %in% c(2000, 2004, 2009, 2014))\nggplot(d_birth_small) +\n  geom_histogram(aes(births)) + \n  facet_grid(year~.)\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-33-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## \n\n::: callout-tip\n## Beyond 2 variables\n\nFaceted figures are a great way to include $\\ge$ 3 variables! See exercise [1.13](https://openintro-ims.netlify.app/data-hello.html)\n:::\n\n## Mosaic plot\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_car) +\n  geom_mosaic(aes(x = product(drv), fill = class))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-34-1.png){fig-align='center' width=80%}\n:::\n:::\n\n. . .\n\n✅ Combines the strengths of the various barplots.\n\n🛑 Not in the tool box of every data scientist\n\n## Boxplots\n\n![From raw data to boxplot](images/lec-3/EDA-boxplot.png)\n\nSource: [R 4 Data Science](https://r4ds.had.co.nz)\n\n##  {.smaller}\n\n-   The thick line in the middle of the box indicates the median;\n\n-   the box stretches from the 25th percentile (Q1) to the 75th percentile (Q3); it covers 50% of the data;\n\n-   the length of the whiskers are at most 1.5 iqr;\n\n-   any observation more than 1.5 iqr away from the box is labelled as an outlier;\n\n. . .\n\n-   more compact than histograms\n\n. . .\n\n::: callout-note\n## Outliers\n\nOutliers have an extreme value. How to deal with an outlier depends on why the observation stands out. Outliers can be\n\n-   removed\n-   corrected\n-   ignored\n:::\n\n## \n\n::: {.callout-tip icon=\"false\"}\n## Group exercise - limitation of boxplots\n\nExercise [5.13](https://openintro-ims.netlify.app/explore-numerical.html#chp5-exercises)\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_628651f5\" style=\"right:0;bottom:0;\" data-warnwhen=\"0\">\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n## \n\n::: panel-tabset\n## Boxplot\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_birth) +\n  geom_boxplot(aes(y = births))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-36-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Side-by-side boxplots\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(d_birth) +\n  geom_boxplot(aes(y=births, x=day_of_week))\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-37-1.png){fig-align='center' width=80%}\n:::\n:::\n:::\n\n# Editing figures\n\n## Figure title\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(title = \"Fuel consumption on the highway per engine size\")\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-38-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## Axis labels\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"5,6\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(\n    title = \"Fuel consumption on the highway per engine size\",\n    x = \"Engine size (engine displaced in litres)\",\n    y = \"Fuel efficiency on the highway (mpg)\"\n    )\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-39-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## \n\n::: panel-tabset\n## theme_bw\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\" code-line-numbers=\"8\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(\n    title = \"Fuel consumption on the highway per engine size\",\n    x = \"Engine size (engine displaced in litres)\",\n    y = \"Fuel efficiency on the highway (mpg)\"\n    ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-40-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## theme_classic\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\" code-line-numbers=\"8\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(\n    title = \"Fuel consumption on the highway per engine size\",\n    x = \"Engine size (engine displaced in litres)\",\n    y = \"Fuel efficiency on the highway (mpg)\"\n    ) +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-41-1.png){fig-align='center' width=80%}\n:::\n:::\n\n## theme_dark\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"show\" code-line-numbers=\"8\"}\nggplot(d_car) +\n  geom_point(aes(displ, hwy)) +\n  labs(\n    title = \"Fuel consumption on the highway per engine size\",\n    x = \"Engine size (engine displaced in litres)\",\n    y = \"Fuel efficiency on the highway (mpg)\"\n    ) +\n  theme_dark()\n```\n\n::: {.cell-output-display}\n![](lec-3_files/figure-revealjs/unnamed-chunk-42-1.png){fig-align='center' width=80%}\n:::\n:::\n:::\n\n## Editing tables {.smaller}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"4|5\"}\ntable(d_car$class, d_car$drv) %>%\n  prop.table(1) %>%\n  round(2) %>%\n  kbl(caption = \"Distribution of drive type per class of car\") %>%\n  kable_classic(full_width = FALSE, c(\"striped\", \"hover\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic lightable-striped lightable-hover\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>\n<caption>Distribution of drive type per class of car</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> 4 </th>\n   <th style=\"text-align:right;\"> f </th>\n   <th style=\"text-align:right;\"> r </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 2seater </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> compact </td>\n   <td style=\"text-align:right;\"> 0.26 </td>\n   <td style=\"text-align:right;\"> 0.74 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> midsize </td>\n   <td style=\"text-align:right;\"> 0.07 </td>\n   <td style=\"text-align:right;\"> 0.93 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> minivan </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> pickup </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> subcompact </td>\n   <td style=\"text-align:right;\"> 0.11 </td>\n   <td style=\"text-align:right;\"> 0.63 </td>\n   <td style=\"text-align:right;\"> 0.26 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> suv </td>\n   <td style=\"text-align:right;\"> 0.82 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 0.18 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n📋 See [this vignette](https://haozhu233.github.io/kableExtra/awesome_table_in_html.html) for more details on editing tables\n\n# Effective communication\n\n## Statistics as an art - figures {.smaller}\n\n-   Have a **purpose**: is the figure necessary?\n\n. . .\n\n-   **Parsimony**: keep it simple and avoid distractions\n\n. . .\n\n-   Tell a **story**: provide context and interpret the figure\n\n. . .\n\n-   **At least 3 variables** as often as possible: color, shape, facets, etc.\n\n. . .\n\n-   **Edit** your figure: title, axes, theme, etc.\n\n. . .\n\n📋 See [R for Data Science - chapters 3 and 7](https://r4ds.had.co.nz/data-visualisation.html) for more on data visualization in R.\n\n# Recap\n\n## Recap\n\n::: incremental\n-   Histogram, scatterplot, boxplot\n-   Average, median, variance, sd and IQR; robustness\n-   Frequency, contigency and proportion tables\n-   Barplot, mosaic plot\n-   Effective communication: well-edited figures, $\\ge3$ variables (symbols, colors, facets), tell a story\n-   [R for Data Science - chapters 3 and 7](https://r4ds.had.co.nz/data-visualisation.html)\n:::\n\n. . .\n\n> \"The simple graph has brought more information to the data analyst's mind than any other device.\" --- John Tukey",
    "supporting": [
      "lec-3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"..\\site_libs/countdown-0.3.5/countdown.css\" rel=\"stylesheet\" />\r\n<script src=\"..\\site_libs/countdown-0.3.5/countdown.js\"></script>\r\n<script src=\"..\\site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"..\\site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}